{"version":3,"file":"ngx-filter-pipe.js","sources":["ng:/ngx-filter-pipe/out/src/app/shared/ngx-filter-pipe/ngx-filter.pipe.ts","ng:/ngx-filter-pipe/out/src/app/shared/ngx-filter-pipe/ngx-filter.module.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by vadimdez on 28/06/16.\n */\nimport { Pipe, Injectable, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filterBy',\n  pure: false\n})\n\n@Injectable()\nexport class FilterPipe implements PipeTransform {\n\n  static isFoundOnWalking(value, key) {\n    let walker = value;\n    let found = false;\n    do {\n      if (walker.hasOwnProperty(key) || Object.getOwnPropertyDescriptor(walker, key)) {\n        found = true;\n        break;\n      }\n    } while (walker = Object.getPrototypeOf(walker));\n\n    return found;\n  }\n\n  static isNumber(value) {\n    return !isNaN(parseInt(value, 10)) && isFinite(value);\n  }\n\n  /**\n   * Checks function's value if type is function otherwise same value\n   */\n  static getValue(value: any): any {\n    return typeof value === 'function' ? value() : value;\n  }\n\n  private filterByString(filter) {\n    if (filter) {\n      filter = filter.toLowerCase();\n    }\n    return value => !filter || (value ? ('' + value).toLowerCase().indexOf(filter) !== -1 : false);\n  }\n\n  private filterByBoolean(filter) {\n    return value => Boolean(value) === filter;\n  }\n\n  private filterByObject(filter) {\n    return value => {\n      for (const key in filter) {\n\n        if (key === '$or') {\n          if (!this.filterByOr(filter.$or)(FilterPipe.getValue(value))) {\n            return false;\n          }\n          continue;\n        }\n\n        if (!value || !FilterPipe.isFoundOnWalking(value, key)) {\n          return false;\n        }\n\n        if (!this.isMatching(filter[key], FilterPipe.getValue(value[key]))) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n  }\n\n  private isMatching(filter, val) {\n    switch (typeof  filter) {\n      case 'boolean':\n        return this.filterByBoolean(filter)(val);\n      case 'string':\n        return this.filterByString(filter)(val);\n      case 'object':\n       return this.filterByObject(filter)(val);\n    }\n    return this.filterDefault(filter)(val);\n  }\n\n  /**\n   * Filter value by $or\n   */\n  private filterByOr(filter: any[]): (value: any) => boolean {\n    return (value: any) => {\n      const length = filter.length;\n\n      const arrayComparison = (i) => value.indexOf(filter[i]) !== -1;\n      const otherComparison = (i) => this.isMatching(filter[i], value);\n      const comparison = Array.isArray(value) ? arrayComparison : otherComparison;\n\n      for (let i = 0; i < length; i++) {\n        if (comparison(i)) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  }\n\n  /**\n   * Default filterDefault function\n   */\n  private filterDefault(filter: any): (value: any) => boolean {\n    return (value: any) => filter === undefined || filter == value;\n  }\n\n  transform(array: any[], filter: any): any {\n    if (!array) {\n      return array;\n    }\n\n    switch (typeof filter) {\n      case 'boolean':\n        return array.filter(this.filterByBoolean(filter));\n      case 'string':\n        if (FilterPipe.isNumber(filter)) {\n          return array.filter(this.filterDefault(filter));\n        }\n        return array.filter(this.filterByString(filter));\n      case 'object':\n        return array.filter(this.filterByObject(filter));\n      case 'function':\n        return array.filter(filter);\n    }\n    return array.filter(this.filterDefault(filter));\n  }\n}\n","/**\n * Created by vadimdez on 28/11/2016.\n */\nimport { NgModule } from '@angular/core';\nimport { FilterPipe } from './ngx-filter.pipe';\n\n@NgModule({\n  declarations: [FilterPipe],\n  providers: [FilterPipe],\n  exports: [FilterPipe]\n})\n\nexport class FilterPipeModule {}\n"]}