{"version":3,"sources":["webpack:///node_modules/Firebase/app/index.js","webpack:///node_modules/Firebase/auth/index.js","webpack:///node_modules/Firebase/database/index.js","webpack:///node_modules/Firebase/index.js","webpack:///node_modules/Firebase/messaging/index.js","webpack:///node_modules/Firebase/storage/index.js","webpack:///src/app/subscription-page/subscription-page.page.html","webpack:///src/app/razorpay.service.ts","webpack:///src/app/subscription-page/subscription-page-routing.module.ts","webpack:///src/app/subscription-page/subscription-page.module.ts","webpack:///src/app/subscription-page/subscription-page.page.scss","webpack:///src/app/subscription-page/subscription-page.page.ts"],"names":["module","exports","firebase","RazorpayService","http","loadingCtrl","url","data","headers","append","options","create","load","present","Promise","resolve","reject","post","pipe","dismiss","subscribe","res","err","get","providedIn","routes","path","component","SubscriptionPagePageRoutingModule","imports","forChild","SubscriptionPagePageModule","declarations","SubscriptionPagePage","route","router","authService","iab","razorpayService","swStorage","loginAuth","planList","subscriptionObj","addons","notes","roomname","rooms","ref","randomString","Math","random","toString","substring","console","log","myRand","snapshot","getStorage","LOGINUSER_PROFILE","then","ptdata","ptDetail","docProfileList","circleDetail","circledetail","getRazorpayPlanList","getSubscribPlanList","getRazorpaySubscribPlanList","rzPlanList","amount","amt","substr","plan_id","planDetails","Date","getTime","planName","name","expireDate","addonItem","item","currency","subscriptionPlanDetails","plandetails","subscriptionfromdate","subscriptionexpirydate","total_count","quantity","customer_notify","notes_key_1","notes_key_2","createRazorpaySubscribe","pay","updateCirclePatientAccountType","userID","addCircleObj","circleCode","circleObj","createdDateTime","subscribePlanId","status","createPtChatObj","circleName","docUserID","createdByUserId","patientUserID","patientName","ptFirstName","ptLastName","createdByDateTime","videoCallLink","dl","doctorName","docFirstName","docLastName","chatRoomName","newData","push","set","on","resp","snapshotToArray","r","currentroomKey","key","setTimeout","undefined","addPtToCircle","chatRoomKey","createPtChat","data1","chatRestrictSubscribeObj","subscriptionId","id","subscriptionFromDate","subscriptionToDate","paymentId","chatCount","createChatRestriction","alert","navigateByUrl","subscriptionData","description","subscription_id","paymentCapture","bind","prefill","email","contact","theme","color","modal","ondismiss","successCallback","payment_id","cancelCallback","error","code","Razorpay","open","response","razorpay_payment_id","rand","floor","logout","selector","template","returnArr","forEach","childSnapshot","val"],"mappings":"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","file":"subscription-page-subscription-page-module-es5.js","sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/polyfill');\nmodule.exports = require('@firebase/app').default;\n","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/auth');\n","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nmodule.exports = require('@firebase/database');\n","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar firebase = require('./app');\nrequire('./auth');\nrequire('./database');\nrequire('./messaging');\nrequire('./storage');\n\nmodule.exports = firebase;\n","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/messaging');\n","/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nrequire('@firebase/storage');\n","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n      <img src=\\\"{{authService.logo_url}}\\\" height=\\\"24\\\" style=\\\"vertical-align: middle; padding-left: 15px;\\\">\\r\\n      <ion-title>Swasth</ion-title>\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon name=\\\"exit-outline\\\" style=\\\"font-size: 26px;\\\" (click)=\\\"logout()\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-row>\\r\\n    <ion-col class=\\\"regis__heading\\\">\\r\\n      <h1>Become a Premium</h1>\\r\\n      <p>Get access to health locker and other swasth features with premium subscription</p>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n  <ion-grid fixed *ngIf=\\\"ptDetail!=undefined\\\">\\r\\n    <ion-row style=\\\"margin-top: 10px;\\\" *ngIf=\\\"ptDetail.accountType=='Family'\\\">\\r\\n      <ion-col size=\\\"12\\\" sizeMd=\\\"6\\\" offsetMd=\\\"3\\\" *ngIf=\\\"rzPlanList!=undefined\\\">\\r\\n        <ion-card *ngFor=\\\"let pl of rzPlanList.items index as i\\\">\\r\\n          <ng-container *ngIf=\\\"i<2\\\">\\r\\n            <ion-card-content *ngIf=\\\"ptDetail.accountType=='Family' && pl.item.name=='Plan A'\\\">\\r\\n              <div style=\\\"width: 100%; display: flex;\\\">\\r\\n                <div style=\\\"width: 65%;\\\">\\r\\n                  <ion-card-subtitle>{{pl.item.name}}</ion-card-subtitle>\\r\\n                  <ion-card-title>₹ {{showAmount(pl.item.amount)}}/ {{pl.period}}</ion-card-title>\\r\\n                  <p>{{pl.item.description}}</p>\\r\\n                </div>\\r\\n                <div style=\\\"width: 35%; margin: auto;\\\">\\r\\n                  <ion-button (click)=\\\"createSubscripe(pl.id,pl.item)\\\">Subscribe</ion-button>\\r\\n                </div>\\r\\n              </div>\\r\\n            </ion-card-content>\\r\\n          </ng-container>\\r\\n        </ion-card>\\r\\n        <!-- <ion-card>\\r\\n          <ion-card-content>\\r\\n            <div style=\\\"width: 100%; display: flex;\\\">\\r\\n              <div style=\\\"width: 65%;\\\">\\r\\n                <ion-card-subtitle>Yearly</ion-card-subtitle>\\r\\n                <ion-card-title>₹ 80/ month</ion-card-title>\\r\\n                <p>Subscription Charged yearly - ₹960</p>\\r\\n              </div>\\r\\n              <div style=\\\"width: 35%; margin: auto;\\\">\\r\\n                <ion-button>Subscribe</ion-button>\\r\\n              </div>\\r\\n            </div>\\r\\n          </ion-card-content>\\r\\n        </ion-card> -->\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row style=\\\"margin-top: 10px;\\\" *ngIf=\\\"ptDetail.accountType!='Family'\\\">\\r\\n      <ion-col size=\\\"12\\\" sizeMd=\\\"6\\\" offsetMd=\\\"3\\\" *ngIf=\\\"rzPlanList!=undefined\\\">\\r\\n        <ion-card *ngFor=\\\"let pl of rzPlanList.items index as i\\\">\\r\\n          <ng-container *ngIf=\\\"i<2\\\">\\r\\n            <ion-card-content>\\r\\n              <div style=\\\"width: 100%; display: flex;\\\">\\r\\n                <div style=\\\"width: 65%;\\\">\\r\\n                  <ion-card-subtitle>{{pl.item.name}}</ion-card-subtitle>\\r\\n                  <ion-card-title>₹ {{showAmount(pl.item.amount)}}/ {{pl.period}}</ion-card-title>\\r\\n                  <p>{{pl.item.description}}</p>\\r\\n                </div>\\r\\n                <div style=\\\"width: 35%; margin: auto;\\\">\\r\\n                  <ion-button (click)=\\\"createSubscripe(pl.id,pl.item)\\\">Subscribe</ion-button>\\r\\n                </div>\\r\\n              </div>\\r\\n            </ion-card-content>\\r\\n          </ng-container>\\r\\n        </ion-card>\\r\\n        <!-- <ion-card>\\r\\n          <ion-card-content>\\r\\n            <div style=\\\"width: 100%; display: flex;\\\">\\r\\n              <div style=\\\"width: 65%;\\\">\\r\\n                <ion-card-subtitle>Yearly</ion-card-subtitle>\\r\\n                <ion-card-title>₹ 80/ month</ion-card-title>\\r\\n                <p>Subscription Charged yearly - ₹960</p>\\r\\n              </div>\\r\\n              <div style=\\\"width: 35%; margin: auto;\\\">\\r\\n                <ion-button>Subscribe</ion-button>\\r\\n              </div>\\r\\n            </div>\\r\\n          </ion-card-content>\\r\\n        </ion-card> -->\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <p style=\\\"font-weight: bold; padding-left: 10px; text-decoration: underline; color: #222222;\\\">Terms &\\r\\n          Conditions:</p>\\r\\n        <p\\r\\n          style=\\\"color: #737373;font-weight: 100; text-indent: 40px; padding-left: 10px; padding-right: 10px; word-break: break-all; font-size: 14px;\\\">\\r\\n          ddada dada da da da da da da d dsa das da d ad ad sad sad ad ad ad ad sadas da da da da da dada dsada.</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\";","import { Injectable } from '@angular/core';\r\nimport { Http, Headers, RequestOptions } from '@angular/http';\r\n// import 'rxjs/add/operator/map';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RazorpayService {\r\n\r\n  data;\r\n\r\n  constructor(public http: Http,public loadingCtrl: LoadingController) { }\r\n\r\n  async callPost(url,data) {\r\n    var headers = new Headers();\r\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n    let options = new RequestOptions({ headers: headers });\r\n\r\n    const load=await this.loadingCtrl.create({});\r\n    load.present();\r\n\r\n    return new Promise((resolve,reject) => {\r\n      this.http.post(\"http://api.razorpay.com/\"+ url,data)\r\n      .pipe(finalize(()=>load.dismiss()))\r\n      .subscribe((res) => {\r\n          resolve(res);  \r\n      },(err)=>{\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n  async callGet(url){\r\n    var headers = new Headers();\r\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n    let options = new RequestOptions({ headers: headers });\r\n\r\n    let load = await this.loadingCtrl.create({});\r\n    load.present();\r\n\r\n    return new Promise((resolve,reject) => {\r\n      this.http.get(\"http://api.razorpay.com/\"+ url)\r\n      .pipe(finalize(()=>load.dismiss()))\r\n      .subscribe((res) => {\r\n          resolve(res);  \r\n      },(err)=>{\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SubscriptionPagePage } from './subscription-page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubscriptionPagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SubscriptionPagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SubscriptionPagePageRoutingModule } from './subscription-page-routing.module';\r\n\r\nimport { SubscriptionPagePage } from './subscription-page.page';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SubscriptionPagePageRoutingModule\r\n  ],\r\n  declarations: [SubscriptionPagePage]\r\n})\r\nexport class SubscriptionPagePageModule {}\r\n","export default \".regis__heading {\\n  height: 180px;\\n  padding-top: 50px;\\n  background-image: linear-gradient(120deg, #0059b3, #00b395);\\n}\\n.regis__heading h1 {\\n  text-align: center;\\n  color: #fff;\\n  text-shadow: 1px 1px 5px #222222;\\n}\\n.regis__heading p {\\n  text-align: center;\\n  color: #fff;\\n}\\nion-button {\\n  --border-radius: 30px;\\n  --background: #00b395;\\n}\\nion-card {\\n  --background:aliceblue;\\n  border-radius: 10px;\\n}\\nion-card ion-card-title {\\n  color: #0059b3;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc3Vic2NyaXB0aW9uLXBhZ2UvRjpcXHN3YXN0aFxcc3dhc3RodmlydHVhbHBhdGllbnQvc3JjXFxhcHBcXHN1YnNjcmlwdGlvbi1wYWdlXFxzdWJzY3JpcHRpb24tcGFnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3N1YnNjcmlwdGlvbi1wYWdlL3N1YnNjcmlwdGlvbi1wYWdlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLGFBQUE7RUFDQSxpQkFBQTtFQUNBLDJEQUFBO0FDQVI7QURDUTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGdDQUFBO0FDQ1o7QURDUTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtBQ0NaO0FER0E7RUFDSSxxQkFBQTtFQUNBLHFCQUFBO0FDQUo7QURFQTtFQUNJLHNCQUFBO0VBQ0EsbUJBQUE7QUNDSjtBREFJO0VBQ0ksY0FBQTtBQ0VSIiwiZmlsZSI6InNyYy9hcHAvc3Vic2NyaXB0aW9uLXBhZ2Uvc3Vic2NyaXB0aW9uLXBhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlZ2lze1xyXG4gICAgJl9faGVhZGluZyB7XHJcbiAgICAgICAgaGVpZ2h0OiAxODBweDtcclxuICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoMTIwZGVnLCAjMDA1OWIzLCAjMDBiMzk1KTtcclxuICAgICAgICBoMSB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgICAgIHRleHQtc2hhZG93OiAxcHggMXB4IDVweCAjMjIyMjIyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwIHtcclxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuaW9uLWJ1dHRvbiB7XHJcbiAgICAtLWJvcmRlci1yYWRpdXM6IDMwcHg7XHJcbiAgICAtLWJhY2tncm91bmQ6ICMwMGIzOTU7XHJcbn1cclxuaW9uLWNhcmQge1xyXG4gICAgLS1iYWNrZ3JvdW5kOmFsaWNlYmx1ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBpb24tY2FyZC10aXRsZSB7XHJcbiAgICAgICAgY29sb3I6ICMwMDU5YjM7XHJcbiAgICB9XHJcbn0iLCIucmVnaXNfX2hlYWRpbmcge1xuICBoZWlnaHQ6IDE4MHB4O1xuICBwYWRkaW5nLXRvcDogNTBweDtcbiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDEyMGRlZywgIzAwNTliMywgIzAwYjM5NSk7XG59XG4ucmVnaXNfX2hlYWRpbmcgaDEge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGNvbG9yOiAjZmZmO1xuICB0ZXh0LXNoYWRvdzogMXB4IDFweCA1cHggIzIyMjIyMjtcbn1cbi5yZWdpc19faGVhZGluZyBwIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogI2ZmZjtcbn1cblxuaW9uLWJ1dHRvbiB7XG4gIC0tYm9yZGVyLXJhZGl1czogMzBweDtcbiAgLS1iYWNrZ3JvdW5kOiAjMDBiMzk1O1xufVxuXG5pb24tY2FyZCB7XG4gIC0tYmFja2dyb3VuZDphbGljZWJsdWU7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG59XG5pb24tY2FyZCBpb24tY2FyZC10aXRsZSB7XG4gIGNvbG9yOiAjMDA1OWIzO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthService } from '../auth.service';\r\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\r\nimport { RazorpayService } from '../razorpay.service';\r\nimport * as firebase from 'Firebase';\r\nimport { SwasthStorageService } from '../storage/swasth-storage.service';\r\nimport { LoginAuthService } from '../services/login-auth.service';\r\n\r\n@Component({\r\n  selector: 'app-subscription-page',\r\n  templateUrl: './subscription-page.page.html',\r\n  styleUrls: ['./subscription-page.page.scss'],\r\n})\r\nexport class SubscriptionPagePage implements OnInit {\r\n  paymentId: any;\r\n\r\n  planList: any = [];\r\n  rzPlanList: any;\r\n  circleObj: any;\r\n  subscribeResp: any;\r\n  docProfileList: any;\r\n  circleDetail: any;\r\n  ptDetail: any;\r\n\r\n  subscriptionPlanDetails\r\n  subscriptionObj: any = {\r\n    addons: [],\r\n    notes: {}\r\n  }\r\n  data = { roomname: '' };\r\n  rooms = [];\r\n  ref = firebase.database().ref('chatrooms/');\r\n  currentroomKey: any;\r\n  chatRoomName: any;\r\n  myRand: any;\r\n\r\n  randomString:any;\r\n  url: string;\r\n  planName:any;\r\n  accountType:any;\r\n\r\n  constructor(private route: ActivatedRoute, private router: Router, private readonly authService: AuthService,\r\n    private iab: InAppBrowser, private razorpayService: RazorpayService, private swStorage: SwasthStorageService,\r\n    private loginAuth: LoginAuthService) {\r\n    /* if (this.router.getCurrentNavigation().extras.state) {\r\n      this.docProfileList = this.router.getCurrentNavigation().extras.state.docProfileList;\r\n      this.circleDetail = this.router.getCurrentNavigation().extras.state.circledetail;\r\n      this.ptDetail = this.router.getCurrentNavigation().extras.state.ptdetail;\r\n    } */\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.randomString = Math.random().toString(36).substring(7);\r\n    console.log(\"Random String==>\",this.randomString);\r\n    this.url=\"https://meet.jit.si/\"+this.randomString;\r\n    //this.urlSafe= this.sanitizer.bypassSecurityTrustResourceUrl(this.url);\r\n    this.myRand = this.random();\r\n    /* this.route.queryParams.subscribe(params => {\r\n      if (this.router.getCurrentNavigation().extras.state) {\r\n        this.circleObj = this.router.getCurrentNavigation().extras.state.circleObj;\r\n      }\r\n    }); */\r\n    if (this.route.snapshot.data['sbData']) {\r\n      let data = this.route.snapshot.data['sbData'];\r\n      this.swStorage.getStorage(this.loginAuth.LOGINUSER_PROFILE).then(ptdata=>{\r\n        this.ptDetail = ptdata;\r\n        console.log(\"Patient Details===>\",this.ptDetail);\r\n        this.docProfileList = data.docProfileList;\r\n        this.circleDetail = data.circledetail;\r\n      });\r\n    }\r\n\r\n\r\n    this.getRazorpayPlanList();\r\n\r\n  }\r\n\r\n  // get swasth subscribe plan list\r\n  getPlanList() {\r\n    this.authService.getSubscribPlanList()\r\n      .subscribe(data => {\r\n        console.log(\"response res--\", data);\r\n        this.planList = data;\r\n      });\r\n  }\r\n\r\n  // get razorpay subscribe plan list\r\n  getRazorpayPlanList() {\r\n    this.authService.getRazorpaySubscribPlanList()\r\n      .subscribe(data => {\r\n        console.log(\"response res--\", data);\r\n        this.rzPlanList = data;\r\n      });\r\n  }\r\n\r\n  showAmount(amount: any) {\r\n    console.log(\"amount\", amount);\r\n    let amt = amount.toString();\r\n    return amt.substr(0, 3);\r\n  }\r\n\r\n  circlepage() {\r\n    console.log(\"asdada\");\r\n    // this.router.navigate(['/login']);\r\n  }\r\n  createSubscripe(plan_id, planDetails) {\r\n    console.log(\"Current Time==>\", new Date().getTime());\r\n    console.log(\"Plan ID==>\", plan_id);\r\n    this.planName=planDetails.name;\r\n    //alert(this.planName);\r\n    // let dateObj=new Date();\r\n    // dateObj.setTime(dateObj.getDate()+30);\r\n    let expireDate = new Date((new Date()).getTime() + 30 * 24 * 60 * 60 * 1000);\r\n    console.log(\"Expire Time==>\", expireDate.getTime());\r\n    let addonItem: any = {\r\n      item: {\r\n        name: planDetails.name,\r\n        amount: planDetails.amount,\r\n        currency: \"INR\"\r\n      }\r\n    }\r\n    this.subscriptionPlanDetails = {\r\n      plandetails: planDetails,\r\n      subscriptionfromdate: new Date(),\r\n      subscriptionexpirydate: expireDate,\r\n    }\r\n    console.log(\"Plan Details==>\", planDetails);\r\n    this.subscriptionObj.plan_id = plan_id;\r\n    this.subscriptionObj.total_count = 1;\r\n    this.subscriptionObj.quantity = 1;\r\n    // this.subscriptionObj.start_at=new Date().getTime();\r\n    // this.subscriptionObj.expire_by=expireDate.getTime();\r\n    this.subscriptionObj.customer_notify = 1;\r\n    //this.subscriptionObj.addons.push(addonItem);\r\n    this.subscriptionObj.notes.notes_key_1 = \"\";\r\n    this.subscriptionObj.notes.notes_key_2 = \"\";\r\n    console.log(\"Subscription Object==>\", this.subscriptionObj);\r\n    this.authService\r\n    .createRazorpaySubscribe(this.subscriptionObj)\r\n    .subscribe(data => {\r\n      console.log(\"data\", data);\r\n      if (data != null) {\r\n        this.pay(data);\r\n      }\r\n    });\r\n  }\r\n\r\n  subscribe() {\r\n    console.log(\"circle detail\", this.circleDetail, this.docProfileList, this.ptDetail);\r\n    //console.log(\"plan name==>\",plan_name);\r\n\r\n    if(this.planName==\"Plan A\")\r\n    {    \r\n      //alert(\"Normal\");  \r\n    this.authService\r\n    .updateCirclePatientAccountType(this.ptDetail.userID,\"Normal\")\r\n    .subscribe(data=>{\r\n      console.log(\"Upadte Status==>\",data);\r\n    });\r\n    }\r\n    else\r\n    {\r\n      //alert(\"Family\");\r\n    this.authService\r\n    .updateCirclePatientAccountType(this.ptDetail.userID,\"Family\")\r\n    .subscribe(data=>{\r\n      console.log(\"Upadte Status==>\",data);\r\n    });\r\n    }\r\n\r\n    \r\n\r\n    let addCircleObj: any = {\r\n      userID: this.ptDetail.userID,\r\n      circleCode: this.circleDetail.circleObj.circleCode,\r\n      createdDateTime: new Date(),\r\n      subscribePlanId: \"1\",\r\n      status: \"Active\"\r\n    }\r\n    let createPtChatObj: any = {\r\n      circleCode: this.circleDetail.circleObj.circleCode,\r\n      circleName: this.circleDetail.circleObj.circleName,\r\n      docUserID: this.circleDetail.circleObj.createdByUserId,\r\n      patientUserID: this.ptDetail.userID,\r\n      patientName: this.ptDetail.ptFirstName + \" \" + this.ptDetail.ptLastName,\r\n      createdByDateTime: new Date(),\r\n      videoCallLink:this.url,\r\n      status: \"Deactive\"\r\n    }\r\n    for (let dl of this.docProfileList) {\r\n      if (dl.docUserID == this.circleDetail.circleObj.createdByUserId) {\r\n        createPtChatObj.doctorName = dl.docFirstName + \" \" + dl.docLastName;\r\n        this.chatRoomName = dl.docFirstName + \" \" + dl.docLastName + \"-\" + this.ptDetail.ptFirstName + \" \" + this.ptDetail.ptLastName + \" \" + this.myRand;\r\n      }\r\n    }\r\n    createPtChatObj.chatRoomName = this.chatRoomName;\r\n    let newData = this.ref.push();\r\n    newData.set({\r\n      roomname: this.chatRoomName\r\n    });\r\n    this.ref.on('value', resp => {\r\n      this.rooms = [];\r\n      this.rooms = snapshotToArray(resp);\r\n      console.log(\"Rooms==>\", this.rooms);\r\n      for (let r of this.rooms) {\r\n        if (r.roomname == this.chatRoomName) {\r\n          this.currentroomKey = r.key;\r\n        }\r\n      }\r\n    });  \r\n    \r\n\r\n    console.log(\"addcircle\", addCircleObj);\r\n    console.log(\"createchat\", createPtChatObj);\r\n    console.log(\"Room Key\", this.currentroomKey);\r\n    setTimeout(() => {     \r\n      if (this.currentroomKey != undefined) {\r\n        this.authService\r\n        .addPtToCircle(addCircleObj)\r\n        .subscribe(data => {\r\n          console.log(\"data\", data);\r\n          if (data != null) {\r\n            createPtChatObj.chatRoomKey = this.currentroomKey;\r\n            this.authService\r\n              .createPtChat(createPtChatObj)\r\n              .subscribe(data1 => {\r\n                console.log(\"data1\", data1);\r\n              });\r\n              let chatRestrictSubscribeObj:any={\r\n                userID: this.ptDetail.userID,\r\n                subscriptionId: this.subscriptionPlanDetails.plandetails.id,\r\n                subscriptionFromDate: this.subscriptionPlanDetails.subscriptionfromdate,\r\n                subscriptionToDate: this.subscriptionPlanDetails.subscriptionexpirydate,\r\n                paymentId: this.paymentId,\r\n                circleCode: this.circleDetail.circleObj.circleCode,\r\n                createdByUserId: this.ptDetail.userID,\r\n                createdDateTime: new Date(),\r\n                status: \"Deactive\",\r\n                chatCount: 0\r\n              }\r\n              console.log(\"subscription detail\", this.subscriptionPlanDetails);\r\n              console.log(\"subscription detail obj\", chatRestrictSubscribeObj);\r\n              this.authService\r\n              .createChatRestriction(chatRestrictSubscribeObj) \r\n              .subscribe(data=>{\r\n                console.log(\"success restriction\", data);\r\n              });\r\n            alert(\"You have been subscribed to virtual Hospital \" + this.circleDetail.circleObj.circleName);\r\n            // this.router.navigate(['/subscribed-doctor-circle']);\r\n            if(this.planName==\"Plan B\")\r\n            {\r\n              this.router.navigateByUrl('subscribe-family-member');\r\n            }\r\n            else\r\n            {\r\n              this.router.navigateByUrl('subscribed-doctor-circle');\r\n            }\r\n            \r\n          }\r\n        });\r\n      }\r\n    }, 3000);\r\n\r\n  }\r\n\r\n  pay(subscriptionData) {\r\n    var options = {\r\n      description: 'Credits towards consultation',\r\n      // image: 'https://i.imgur.com/3g7nmJC.png',\r\n      currency: 'INR',\r\n      key: 'rzp_test_SeRkqskw09t911',\r\n      subscription_id: subscriptionData.id,\r\n      name: this.ptDetail.ptFirstName + \" \" + this.ptDetail.ptLastName,\r\n      'handler': this.paymentCapture.bind(this),\r\n      prefill: {\r\n        email: 'varadhan@swasth.tech',\r\n        contact: '9884396427'\r\n      },\r\n      theme: {\r\n        color: '#F37254'\r\n      },\r\n      modal: {\r\n        ondismiss: () => { // <- Here!\r\n          //alert('dismissed')\r\n        }\r\n      }\r\n    }\r\n\r\n    var successCallback = (payment_id) => { // <- Here!\r\n      //alert('payment_id: ' + payment_id);\r\n      // this.navCtrl.push(\"ThankyouPage\",{\r\n      //         status: this.status\r\n      //     });\r\n    };\r\n\r\n    var cancelCallback = (error) => { // <- Here!\r\n      alert(error.description + ' (Error ' + error.code + ')');\r\n    };\r\n\r\n    Razorpay.open(options, successCallback, cancelCallback);\r\n  }\r\n\r\n  paymentCapture(response) {\r\n    this.paymentId = response.razorpay_payment_id;\r\n    //alert(this.paymentId);\r\n    console.log(\"payment id \" + this.paymentId);\r\n    this.subscribe();\r\n  }\r\n\r\n  random(): number {\r\n    let rand = Math.floor(Math.random() * 20000) + 1;\r\n    return rand;\r\n  }\r\n\r\n  logout() {\r\n    this.loginAuth.logout();\r\n  }\r\n}\r\n\r\nexport const snapshotToArray = snapshot => {\r\n  let returnArr = [];\r\n\r\n  snapshot.forEach(childSnapshot => {\r\n    let item = childSnapshot.val();\r\n    item.key = childSnapshot.key;\r\n    returnArr.push(item);\r\n  });\r\n\r\n  return returnArr;\r\n};\r\n"]}