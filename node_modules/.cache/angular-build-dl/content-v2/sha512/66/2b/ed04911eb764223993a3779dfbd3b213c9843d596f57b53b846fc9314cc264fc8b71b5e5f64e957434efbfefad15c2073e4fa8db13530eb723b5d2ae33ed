{"version":3,"sources":["webpack:///src/app/subscription-page/subscription-page.page.html","webpack:///src/app/razorpay.service.ts","webpack:///src/app/subscription-page/subscription-page-routing.module.ts","webpack:///src/app/subscription-page/subscription-page.module.ts","webpack:///src/app/subscription-page/subscription-page.page.scss","webpack:///src/app/subscription-page/subscription-page.page.ts"],"names":["RazorpayService","http","loadingCtrl","url","data","headers","append","options","create","load","present","Promise","resolve","reject","post","pipe","dismiss","subscribe","res","err","get","providedIn","routes","path","component","SubscriptionPagePageRoutingModule","imports","forChild","exports","SubscriptionPagePageModule","declarations","SubscriptionPagePage","route","router","authService","iab","razorpayService","planList","getCurrentNavigation","extras","state","docProfileList","circleDetail","circledetail","ptDetail","ptdetail","queryParams","params","circleObj","getRazorpayPlanList","getSubscribPlanList","console","log","getRazorpaySubscribPlanList","rzPlanList","addCircleObj","userID","circleCode","createdDateTime","Date","subscribePlanId","status","createPtChatObj","circleName","docUserID","createdByUserId","patientUserID","patientName","ptFirstName","ptLastName","chatRoomKey","chatRoomName","createdByDateTime","dl","doctorName","docFirstName","docLastName","addPtToCircle","alert","navigate","createPtChat","data1","description","currency","key","subscription_id","name","paymentCapture","bind","prefill","email","contact","theme","color","modal","ondismiss","successCallback","payment_id","cancelCallback","error","code","Razorpay","open","response","paymentId","razorpay_payment_id","selector","template"],"mappings":"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","file":"subscription-page-subscription-page-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n      <img src=\\\"{{authService.logo_url}}\\\" height=\\\"24\\\" style=\\\"vertical-align: middle; padding-left: 15px;\\\">\\r\\n      <ion-title>Swasth</ion-title>\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon name=\\\"exit-outline\\\" style=\\\"font-size: 26px;\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-row>\\r\\n    <ion-col class=\\\"regis__heading\\\">\\r\\n      <h1>Become a Premium</h1>\\r\\n      <p>Get access to health locker and other swasth features with premium subscription</p>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n  <ion-grid fixed>\\r\\n    <ion-row style=\\\"margin-top: 10px;\\\">\\r\\n      <ion-col size=\\\"12\\\" sizeMd=\\\"6\\\" offsetMd=\\\"3\\\" *ngIf=\\\"rzPlanList!=undefined\\\">\\r\\n        <ion-card *ngFor=\\\"let pl of rzPlanList.items index as i\\\">  \\r\\n          <ion-card-content *ngIf=\\\"i<2\\\">\\r\\n            <div style=\\\"width: 100%; display: flex;\\\">\\r\\n              <div style=\\\"width: 65%;\\\">\\r\\n                <ion-card-subtitle>{{pl.item.name}}</ion-card-subtitle>\\r\\n                <ion-card-title>â‚¹ {{pl.item.amount}}/ {{pl.period}}</ion-card-title>\\r\\n                <p>{{pl.item.description}}</p>\\r\\n              </div>\\r\\n              <div style=\\\"width: 35%; margin: auto;\\\">\\r\\n                <ion-button (click)=\\\"pay()\\\">Subscribe</ion-button>                \\r\\n              </div>\\r\\n            </div>\\r\\n          </ion-card-content>\\r\\n        </ion-card>        \\r\\n        <!-- <ion-card>\\r\\n          <ion-card-content>\\r\\n            <div style=\\\"width: 100%; display: flex;\\\">\\r\\n              <div style=\\\"width: 65%;\\\">\\r\\n                <ion-card-subtitle>Yearly</ion-card-subtitle>\\r\\n                <ion-card-title>â‚¹ 80/ month</ion-card-title>\\r\\n                <p>Subscription Charged yearly - â‚¹960</p>\\r\\n              </div>\\r\\n              <div style=\\\"width: 35%; margin: auto;\\\">\\r\\n                <ion-button>Subscribe</ion-button>\\r\\n              </div>\\r\\n            </div>\\r\\n          </ion-card-content>\\r\\n        </ion-card> -->        \\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <p style=\\\"font-weight: bold; padding-left: 10px; text-decoration: underline; color: #222222;\\\">Terms & Conditions:</p>\\r\\n        <p style=\\\"color: #737373;font-weight: 100; text-indent: 40px; padding-left: 10px; padding-right: 10px; word-break: break-all; font-size: 14px;\\\">ddada dada da da da da da da d dsa das da d ad ad sad sad ad ad ad ad sadas da da da da da dada dsada.</p>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { Http, Headers, RequestOptions } from '@angular/http';\r\n// import 'rxjs/add/operator/map';\r\nimport { LoadingController } from '@ionic/angular';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RazorpayService {\r\n\r\n  data;\r\n\r\n  constructor(public http: Http,public loadingCtrl: LoadingController) { }\r\n\r\n  async callPost(url,data) {\r\n    var headers = new Headers();\r\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n    let options = new RequestOptions({ headers: headers });\r\n\r\n    const load=await this.loadingCtrl.create({});\r\n    load.present();\r\n\r\n    return new Promise((resolve,reject) => {\r\n      this.http.post(\"http://api.razorpay.com/\"+ url,data)\r\n      .pipe(finalize(()=>load.dismiss()))\r\n      .subscribe((res) => {\r\n          resolve(res);  \r\n      },(err)=>{\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n  async callGet(url){\r\n    var headers = new Headers();\r\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n    let options = new RequestOptions({ headers: headers });\r\n\r\n    let load = await this.loadingCtrl.create({});\r\n    load.present();\r\n\r\n    return new Promise((resolve,reject) => {\r\n      this.http.get(\"http://api.razorpay.com/\"+ url)\r\n      .pipe(finalize(()=>load.dismiss()))\r\n      .subscribe((res) => {\r\n          resolve(res);  \r\n      },(err)=>{\r\n        reject(err);\r\n      })\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SubscriptionPagePage } from './subscription-page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SubscriptionPagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SubscriptionPagePageRoutingModule {}\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SubscriptionPagePageRoutingModule } from './subscription-page-routing.module';\r\n\r\nimport { SubscriptionPagePage } from './subscription-page.page';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SubscriptionPagePageRoutingModule\r\n  ],\r\n  declarations: [SubscriptionPagePage]\r\n})\r\nexport class SubscriptionPagePageModule {}\r\n","export default \".regis__heading {\\n  height: 180px;\\n  padding-top: 50px;\\n  background-image: linear-gradient(120deg, #0059b3, #00b395);\\n}\\n.regis__heading h1 {\\n  text-align: center;\\n  color: #fff;\\n  text-shadow: 1px 1px 5px #222222;\\n}\\n.regis__heading p {\\n  text-align: center;\\n  color: #fff;\\n}\\nion-button {\\n  --border-radius: 30px;\\n  --background: #00b395;\\n}\\nion-card {\\n  --background:aliceblue;\\n  border-radius: 10px;\\n}\\nion-card ion-card-title {\\n  color: #0059b3;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc3Vic2NyaXB0aW9uLXBhZ2UvRjpcXHN3YXN0aFxcc3dhc3RodmlydHVhbHBhdGllbnQvc3JjXFxhcHBcXHN1YnNjcmlwdGlvbi1wYWdlXFxzdWJzY3JpcHRpb24tcGFnZS5wYWdlLnNjc3MiLCJzcmMvYXBwL3N1YnNjcmlwdGlvbi1wYWdlL3N1YnNjcmlwdGlvbi1wYWdlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLGFBQUE7RUFDQSxpQkFBQTtFQUNBLDJEQUFBO0FDQVI7QURDUTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGdDQUFBO0FDQ1o7QURDUTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtBQ0NaO0FER0E7RUFDSSxxQkFBQTtFQUNBLHFCQUFBO0FDQUo7QURFQTtFQUNJLHNCQUFBO0VBQ0EsbUJBQUE7QUNDSjtBREFJO0VBQ0ksY0FBQTtBQ0VSIiwiZmlsZSI6InNyYy9hcHAvc3Vic2NyaXB0aW9uLXBhZ2Uvc3Vic2NyaXB0aW9uLXBhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlZ2lze1xyXG4gICAgJl9faGVhZGluZyB7XHJcbiAgICAgICAgaGVpZ2h0OiAxODBweDtcclxuICAgICAgICBwYWRkaW5nLXRvcDogNTBweDtcclxuICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoMTIwZGVnLCAjMDA1OWIzLCAjMDBiMzk1KTtcclxuICAgICAgICBoMSB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgICAgIHRleHQtc2hhZG93OiAxcHggMXB4IDVweCAjMjIyMjIyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwIHtcclxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuaW9uLWJ1dHRvbiB7XHJcbiAgICAtLWJvcmRlci1yYWRpdXM6IDMwcHg7XHJcbiAgICAtLWJhY2tncm91bmQ6ICMwMGIzOTU7XHJcbn1cclxuaW9uLWNhcmQge1xyXG4gICAgLS1iYWNrZ3JvdW5kOmFsaWNlYmx1ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBpb24tY2FyZC10aXRsZSB7XHJcbiAgICAgICAgY29sb3I6ICMwMDU5YjM7XHJcbiAgICB9XHJcbn0iLCIucmVnaXNfX2hlYWRpbmcge1xuICBoZWlnaHQ6IDE4MHB4O1xuICBwYWRkaW5nLXRvcDogNTBweDtcbiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KDEyMGRlZywgIzAwNTliMywgIzAwYjM5NSk7XG59XG4ucmVnaXNfX2hlYWRpbmcgaDEge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIGNvbG9yOiAjZmZmO1xuICB0ZXh0LXNoYWRvdzogMXB4IDFweCA1cHggIzIyMjIyMjtcbn1cbi5yZWdpc19faGVhZGluZyBwIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogI2ZmZjtcbn1cblxuaW9uLWJ1dHRvbiB7XG4gIC0tYm9yZGVyLXJhZGl1czogMzBweDtcbiAgLS1iYWNrZ3JvdW5kOiAjMDBiMzk1O1xufVxuXG5pb24tY2FyZCB7XG4gIC0tYmFja2dyb3VuZDphbGljZWJsdWU7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG59XG5pb24tY2FyZCBpb24tY2FyZC10aXRsZSB7XG4gIGNvbG9yOiAjMDA1OWIzO1xufSJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthService } from '../auth.service';\r\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\r\nimport { RazorpayService } from '../razorpay.service';\r\n\r\n@Component({\r\n  selector: 'app-subscription-page',\r\n  templateUrl: './subscription-page.page.html',\r\n  styleUrls: ['./subscription-page.page.scss'],\r\n})\r\nexport class SubscriptionPagePage implements OnInit {\r\n  paymentId:any;\r\n\r\n  planList:any = [];\r\n  rzPlanList:any;\r\n  circleObj:any;\r\n  subscribeResp:any;  \r\n  docProfileList:any;\r\n  circleDetail:any;\r\n  ptDetail:any;\r\n\r\n  constructor(private route: ActivatedRoute, private router: Router,private readonly authService: AuthService, \r\n    private iab: InAppBrowser,private razorpayService: RazorpayService) { \r\n    if (this.router.getCurrentNavigation().extras.state) {\r\n      this.docProfileList = this.router.getCurrentNavigation().extras.state.docProfileList;\r\n      this.circleDetail = this.router.getCurrentNavigation().extras.state.circledetail;\r\n      this.ptDetail = this.router.getCurrentNavigation().extras.state.ptdetail;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    this.route.queryParams.subscribe(params => {\r\n      if (this.router.getCurrentNavigation().extras.state) {\r\n        this.circleObj = this.router.getCurrentNavigation().extras.state.circleObj;\r\n      }\r\n    });\r\n\r\n    this.getRazorpayPlanList();\r\n\r\n  }\r\n\r\n  // get swasth subscribe plan list\r\n  getPlanList() {\r\n    this.authService.getSubscribPlanList()\r\n    .subscribe(data=>{\r\n      console.log(\"response res--\",data);\r\n      this.planList = data;\r\n    });\r\n  }\r\n\r\n  // get razorpay subscribe plan list\r\n  getRazorpayPlanList() {\r\n    this.authService.getRazorpaySubscribPlanList()\r\n    .subscribe(data=>{\r\n      console.log(\"response res--\",data);\r\n      this.rzPlanList = data;\r\n    });\r\n  }\r\n\r\n  // showAmount(amount:any)\r\n  // {\r\n  //   console.log(\"amount\", amount);\r\n  //   let amt=amount.split('');\r\n  //   return amt.length-2;\r\n\r\n  // }\r\n\r\n  circlepage() {\r\n    console.log(\"asdada\");\r\n    // this.router.navigate(['/login']);\r\n  }\r\n\r\n  subscribe() {\r\n    console.log(\"circle detail\", this.circleDetail, this.docProfileList, this.ptDetail);\r\n    let addCircleObj:any={\r\n      userID: this.ptDetail.userID,\r\n      circleCode: this.circleDetail.circleObj.circleCode,\r\n      createdDateTime: new Date(),\r\n      subscribePlanId: \"1\",\r\n      status: \"Active\"\r\n    }\r\n    let createPtChatObj:any={\r\n      circleCode: this.circleDetail.circleObj.circleCode,\r\n      circleName: this.circleDetail.circleObj.circleName ,\r\n      docUserID: this.circleDetail.circleObj.createdByUserId ,\r\n      patientUserID: this.ptDetail.userID,\r\n      patientName: this.ptDetail.ptFirstName+\" \"+ this.ptDetail.ptLastName,\r\n      chatRoomKey: this.circleDetail.circleObj.chatRoomKey ,\r\n      chatRoomName: this.circleDetail.circleObj.chatRoomName ,\r\n      createdByDateTime: new Date(),\r\n      status: \"Active\"\r\n    }\r\n    for(let dl of this.docProfileList) {\r\n      if(dl.docUserID==this.circleDetail.circleObj.createdByUserId) {\r\n        createPtChatObj.doctorName=dl.docFirstName+\" \"+dl.docLastName;\r\n      }\r\n    }\r\n    console.log(\"addcircle\", addCircleObj);\r\n    console.log(\"createchat\", createPtChatObj);\r\n    this.authService\r\n    .addPtToCircle(addCircleObj)\r\n    .subscribe(data=>{\r\n      console.log(\"data\", data);\r\n      if (data!=null) {\r\n        alert(\"You have been subscribed to virtual Hospital \"+this.circleDetail.circleObj.circleName);\r\n        this.router.navigate(['/subscribed-doctor-circle']);\r\n      }\r\n    });\r\n    this.authService\r\n    .createPtChat(createPtChatObj)\r\n    .subscribe(data1=>{\r\n      console.log(\"data1\", data1);\r\n    });\r\n\r\n  }\r\n\r\n  pay()\r\n  {\r\n    var options = {\r\n      description: 'Credits towards consultation',\r\n      // image: 'https://i.imgur.com/3g7nmJC.png',\r\n      currency: 'INR',\r\n      key: 'rzp_test_SeRkqskw09t911',\r\n      subscription_id: 'sub_ExjYJHeeJtf6B8',\r\n      name: \"Varadhan P\",\r\n      'handler': this.paymentCapture.bind(this),  \r\n      prefill: {\r\n        email: 'varadhan@swasth.tech',\r\n        contact: '9884396427'\r\n      },    \r\n      theme: {\r\n        color: '#F37254'\r\n      },\r\n      modal: {\r\n        ondismiss: () => { // <- Here!\r\n          //alert('dismissed')\r\n        }\r\n      }\r\n    }\r\n\r\n    var successCallback = (payment_id) => { // <- Here!\r\n      //alert('payment_id: ' + payment_id);\r\n      // this.navCtrl.push(\"ThankyouPage\",{\r\n      //         status: this.status\r\n      //     });\r\n    };\r\n    \r\n    var cancelCallback = (error) => { // <- Here!\r\n      alert(error.description + ' (Error ' + error.code + ')');\r\n    };\r\n\r\n    Razorpay.open(options, successCallback, cancelCallback);\r\n  }\r\n\r\n  paymentCapture(response) { \r\n    this.paymentId = response.razorpay_payment_id;\r\n    //alert(this.paymentId);\r\n    console.log(\"payment id \"+this.paymentId);\r\n    this.subscribe();\r\n  }\r\n}\r\n"]}